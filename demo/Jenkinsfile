pipeline {
    agent any
    stages {
        stage('Initialize') {
            steps {
                echo 'setting...'   
                 bat 'set'
            }
        }
       stage('build') {
          steps {
             bat 'echo building....'
             bat 'gradle build'
               bat 'echo builded....'    
            
          }
       }
        stage('try') {
          steps {
             bat 'echo changing path....'
           //  bat 'cd E:\\git\\repo\\demo'
          //   bat 'gradle build'
               bat 'echo builded....'    
            
          }
       }
        stage('Build + SonarQube analysis') {
             def sqScannerMsBuildHome = tool 'Scanner for MSBuild 2.2'
            steps {
   
    withSonarQubeEnv('clsd') {
      // Due to SONARMSBRU-307 value of sonar.host.url and credentials should be passed on command line
      bat "${sqScannerMsBuildHome}\\SonarQube.Scanner.MSBuild.exe begin /k:myKey /n:myName /v:1.0 /d:sonar.host.url=%SONAR_HOST_URL% /d:sonar.login=%SONAR_AUTH_TOKEN%"
      bat 'MSBuild.exe /t:Rebuild'
      bat "${sqScannerMsBuildHome}\\SonarQube.Scanner.MSBuild.exe end"
    }
  }
        }
    }
    post { 
        always { 
             echo 'DONE!'
        }
    }
}
